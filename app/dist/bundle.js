/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/combat/combat.js":
/*!******************************!*\
  !*** ./src/combat/combat.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"combat\": () => (/* binding */ combat)\n/* harmony export */ });\n/* harmony import */ var _entities_mobs_mobsManager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../entities/mobs/mobsManager */ \"./src/entities/mobs/mobsManager.js\");\n/* harmony import */ var _entities_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../entities/player */ \"./src/entities/player.js\");\n/* harmony import */ var _physics_collision__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../physics/collision */ \"./src/physics/collision.js\");\n\n\n\n\nconst combat = {\n    attack(entityHitbox, attackPoint, weaponName) {\n        weapons[weaponName].attack(entityHitbox, attackPoint)\n    }\n}\n\nconst weapons = {\n    fist: {\n        attack: function (entityHitbox, attackPoint) {\n            // if player initiated attack (leftclick)\n            let damageHitbox = {\n                type: 'line',\n                p1: _entities_player__WEBPACK_IMPORTED_MODULE_1__.player.reachPoint,\n                p2: { \n                    x: (entityHitbox.pos.x + attackPoint.x) / 2,\n                    y: (entityHitbox.pos.y + attackPoint.y) / 2\n                }\n            }\n    \n            Object.keys(_entities_mobs_mobsManager__WEBPACK_IMPORTED_MODULE_0__.mobs).forEach(mobId=> {\n                let mob = _entities_mobs_mobsManager__WEBPACK_IMPORTED_MODULE_0__.mobs[mobId]\n                let mobHitBox = {\n                    type: 'circle',\n                    pos: mob.pos,\n                    r: 0.4\n                }\n                if (_physics_collision__WEBPACK_IMPORTED_MODULE_2__.collision.detect(damageHitbox, mobHitBox)) {\n                    applyKnockbackOnMob(mob)\n                    //delete mobs[mobId]\n                }\n            })\n        }\n    }\n}\n\nfunction applyKnockbackOnMob(mob) {\n    // distance from player\n    let dx = mob.pos.x - _entities_player__WEBPACK_IMPORTED_MODULE_1__.player.pos.x\n    let dy = mob.pos.y - _entities_player__WEBPACK_IMPORTED_MODULE_1__.player.pos.y\n    let dist = Math.sqrt(dx*dx + dy*dy)\n    let ratio = 4 / dist // make mob fly 2 meters per sec\n\n    mob.mEntity.state = {\n        type: \"knockback\",\n        vx: dx * ratio,\n        vy: dy * ratio,\n        distance: 2\n    }\n}\n\n//# sourceURL=webpack://app/./src/combat/combat.js?");

/***/ }),

/***/ "./src/dbg.js":
/*!********************!*\
  !*** ./src/dbg.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"debugInfo\": () => (/* binding */ debugInfo)\n/* harmony export */ });\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./game */ \"./src/game.js\");\n\n\nconst fpsCountMax = 100;\n\nconst debugInfo = {\n    fps: -1,\n    fpsTimeStamp: 0,\n    frameCounter: 0,\n    update() {\n        // count frames untill reaching some value\n        this.frameCounter = (this.frameCounter + 1) % fpsCountMax\n        // when that value is reached\n        if (!this.frameCounter) {\n            // calculate elapsed time\n            let elapsedTime = _game__WEBPACK_IMPORTED_MODULE_0__.timeNow - this.fpsTimeStamp;\n            // true fps = how many times counted fps devided by elapsed time\n            this.fps = fpsCountMax / elapsedTime * 1000; // in seconds\n            //restart counting\n            this.fpsTimeStamp = _game__WEBPACK_IMPORTED_MODULE_0__.timeNow\n            this.frameCounter = 0\n        }\n    },\n    init() {\n        this.fpsTimeStamp = _game__WEBPACK_IMPORTED_MODULE_0__.timeNow\n    }\n}\n\n//# sourceURL=webpack://app/./src/dbg.js?");

/***/ }),

/***/ "./src/entities/MovingEntity.js":
/*!**************************************!*\
  !*** ./src/entities/MovingEntity.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MovingEntity\": () => (/* binding */ MovingEntity)\n/* harmony export */ });\nconst updateFooTypes = {\n    default: function (mEntity, dt) {\n        mEntity.hitbox.pos.x += mEntity.speed * dt * mEntity.v.x\n        mEntity.hitbox.pos.y += mEntity.speed * dt * mEntity.v.y\n    },\n    knockback: function (mEntity, dt) {\n        let dx = mEntity.speed * dt * mEntity.state.vx\n        let dy = mEntity.speed * dt * mEntity.state.vy\n        mEntity.hitbox.pos.x += dx\n        mEntity.hitbox.pos.y += dy\n        let dist = Math.sqrt(dx*dx + dy*dy)\n        mEntity.state.distance -= dist\n        if(mEntity.state.distance <= 0)\n            mEntity.state.type = \"default\"\n    }\n}\n\nclass MovingEntity {\n    constructor(hitbox, speed, v = {x: 0, y: 0}, state = {type: \"default\"}) {\n        this.hitbox = hitbox\n        this.v = v\n        this.speed = speed\n        this.state = state\n    }\n\n    update(dt) {\n        updateFooTypes[this.state.type](this, dt)\n    }\n\n    bounceOffObjects(cBoxes) {\n        cBoxes.forEach(cBox => {\n            collision.bounseOffCbox(this, cBox);\n        });\n    }\n}\n\n//# sourceURL=webpack://app/./src/entities/MovingEntity.js?");

/***/ }),

/***/ "./src/entities/mobs/mob.js":
/*!**********************************!*\
  !*** ./src/entities/mobs/mob.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"MOB_RADIUS\": () => (/* binding */ MOB_RADIUS),\n/* harmony export */   \"MOB_RANGE\": () => (/* binding */ MOB_RANGE),\n/* harmony export */   \"Mob\": () => (/* binding */ Mob)\n/* harmony export */ });\n/* harmony import */ var _graphic_camera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../graphic/camera */ \"./src/graphic/camera.js\");\n/* harmony import */ var _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../graphic/graphic */ \"./src/graphic/graphic.js\");\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../player */ \"./src/entities/player.js\");\n/* harmony import */ var _MovingEntity__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../MovingEntity */ \"./src/entities/MovingEntity.js\");\n\n\n\n\nconst MOB_RADIUS = 0.4\nconst MOB_RANGE = 0.6\nconst MOB_SPEED = 0.002\n\nclass Mob {\n    constructor(position) { \n        this.mEntity = new _MovingEntity__WEBPACK_IMPORTED_MODULE_3__.MovingEntity({\n            type: \"circle\",\n            pos: position,\n            r: MOB_RADIUS\n        }, MOB_SPEED)\n        this.pos = this.mEntity.hitbox.pos\n        this.v = this.mEntity.v\n    }\n\n    updateActions(dt){}\n\n    updateMovement(dt) {\n        this.v.x = (this.pos.x - _player__WEBPACK_IMPORTED_MODULE_2__.player.pos.x > 0) ? -1 : 1\n        this.v.y = (this.pos.y - _player__WEBPACK_IMPORTED_MODULE_2__.player.pos.y > 0) ? -1 : 1\n        this.mEntity.update(dt)\n    }\n\n    draw() {\n        // map game position to screen position\n        const drawPos = _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.gamePos2ScreenPos(this.pos)\n        const drawRadius = MOB_RADIUS * _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.config.meter2pixels \n        const drawRange = MOB_RANGE * _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.config.meter2pixels \n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fillStyle = 'blue';\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.beginPath();\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.arc(drawPos.x, drawPos.y, drawRange, 0, Math.PI*2, true)\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fill();\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fillStyle = 'grey';\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.beginPath();\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.arc(drawPos.x, drawPos.y, drawRadius, 0, Math.PI*2, true)\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fill();\n    }\n\n    pathFindPlayer() {\n\n    }\n}\n\n//# sourceURL=webpack://app/./src/entities/mobs/mob.js?");

/***/ }),

/***/ "./src/entities/mobs/mobsManager.js":
/*!******************************************!*\
  !*** ./src/entities/mobs/mobsManager.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"mobs\": () => (/* binding */ mobs),\n/* harmony export */   \"mobsManager\": () => (/* binding */ mobsManager)\n/* harmony export */ });\n/* harmony import */ var _mob__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mob */ \"./src/entities/mobs/mob.js\");\n\n\nconst mobs = {}\nconst mobsManager = {\n    createMob(pos) {\n        let mobKey = Math.floor(Math.random() * 10000000)\n        mobs[mobKey] = new _mob__WEBPACK_IMPORTED_MODULE_0__.Mob(pos)\n    },\n    updateActions(dt) {\n        Object.keys(mobs).forEach(mobKey=>{\n            mobs[mobKey].updateActions(dt)\n        })\n    },\n    updateMovement(dt) {\n        Object.keys(mobs).forEach(mobKey=>{\n            mobs[mobKey].updateMovement(dt)\n        })\n    },\n    draw() {\n        Object.keys(mobs).forEach(mobKey=>{\n            mobs[mobKey].draw()\n        })\n    }\n}\n\n//# sourceURL=webpack://app/./src/entities/mobs/mobsManager.js?");

/***/ }),

/***/ "./src/entities/player.js":
/*!********************************!*\
  !*** ./src/entities/player.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PLAYER_RADIUS\": () => (/* binding */ PLAYER_RADIUS),\n/* harmony export */   \"PLAYER_REACH_DISTANCE\": () => (/* binding */ PLAYER_REACH_DISTANCE),\n/* harmony export */   \"player\": () => (/* binding */ player)\n/* harmony export */ });\n/* harmony import */ var _graphic_camera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../graphic/camera */ \"./src/graphic/camera.js\");\n/* harmony import */ var _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../graphic/graphic */ \"./src/graphic/graphic.js\");\n/* harmony import */ var _combat_combat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../combat/combat */ \"./src/combat/combat.js\");\n/* harmony import */ var _input__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../input */ \"./src/input.js\");\n/* harmony import */ var _MovingEntity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MovingEntity */ \"./src/entities/MovingEntity.js\");\n\n\n\n\n\n\nconst PLAYER_RADIUS = .4;\nconst PLAYER_REACH_DISTANCE = 1.2\nconst PLAYER_SPEED = 0.004\n\nconst player = {\n    init(position) {\n        this.mEntity = new _MovingEntity__WEBPACK_IMPORTED_MODULE_4__.MovingEntity({\n            type: \"circle\",\n            pos: position,\n            r: PLAYER_RADIUS\n        }, PLAYER_SPEED)\n        this.pos = this.mEntity.hitbox.pos // game position\n        this.v = this.mEntity.v     // velocity vector\n        this.reachPoint = {x: 0, y: 0}\n        this.currentWeapon = \"fist\"\n        this.attackTriggered = false\n    },\n    updateActions(dt) {\n        updatePlayerReachPoint()\n        if (this.attackTriggered) {\n            _combat_combat__WEBPACK_IMPORTED_MODULE_2__.combat.attack(this.mEntity.hitbox, this.reachPoint, this.currentWeapon)\n            this.attackTriggered = false\n        }\n    },\n    updateMovement(dt) {\n        updatePlayerVelocityVector()\n        // move by velocity\n        this.mEntity.update(dt)\n    },\n    draw() {\n        // map game position to screen position\n        const drawPos = _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.gamePos2ScreenPos(this.pos)\n        const drawRadius = PLAYER_RADIUS * _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.config.meter2pixels \n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fillStyle = 'white'\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.beginPath()\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.arc(drawPos.x, drawPos.y, drawRadius, 0, Math.PI*2, true)\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fill()\n\n        // map player reach position\n        const drawReachPoint = _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.gamePos2ScreenPos(this.reachPoint)\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fillStyle = '#00ff00'\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.beginPath()\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.arc(drawReachPoint.x, drawReachPoint.y, 5, 0, Math.PI*2, true)\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fill()\n\n        // draw reach line\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.strokeStyle = '#00ff00'\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.beginPath()\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.moveTo(drawPos.x, drawPos.y)\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.lineTo(drawReachPoint.x, drawReachPoint.y)\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.stroke()\n    }\n}\n\nfunction updatePlayerReachPoint() {\n    // face the mouse coursor\n    // get distance from player to mouse in game coords\n    let mouseGamePos = _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.screenPos2GamePos(_input__WEBPACK_IMPORTED_MODULE_3__.input.mouse.pos)\n    let mouseDx = mouseGamePos.x - player.pos.x\n    let mouseDy = mouseGamePos.y - player.pos.y\n    let mouseGameDistance = Math.sqrt(mouseDx*mouseDx + mouseDy*mouseDy)\n    if (mouseGameDistance < PLAYER_REACH_DISTANCE) {\n        player.reachPoint = mouseGamePos\n    } else {\n        let distanceScale = PLAYER_REACH_DISTANCE / mouseGameDistance\n        player.reachPoint.x = player.pos.x + mouseDx * distanceScale\n        player.reachPoint.y = player.pos.y + mouseDy * distanceScale\n    }\n}\n\nfunction updatePlayerVelocityVector() {\n    // update player movement controls\n    if (_input__WEBPACK_IMPORTED_MODULE_3__.input.keyboard.pressingLeft && !_input__WEBPACK_IMPORTED_MODULE_3__.input.keyboard.pressingRight)\n        player.v.x = -1\n    else if (_input__WEBPACK_IMPORTED_MODULE_3__.input.keyboard.pressingRight && !_input__WEBPACK_IMPORTED_MODULE_3__.input.keyboard.pressingLeft)\n        player.v.x = 1\n    else player.v.x = 0\n\n    if (_input__WEBPACK_IMPORTED_MODULE_3__.input.keyboard.pressingUp && !_input__WEBPACK_IMPORTED_MODULE_3__.input.keyboard.pressingDown)\n        player.v.y = -1\n    else if (_input__WEBPACK_IMPORTED_MODULE_3__.input.keyboard.pressingDown && !_input__WEBPACK_IMPORTED_MODULE_3__.input.keyboard.pressingUp)\n        player.v.y = 1\n    else player.v.y = 0\n}\n\n//# sourceURL=webpack://app/./src/entities/player.js?");

/***/ }),

/***/ "./src/game.js":
/*!*********************!*\
  !*** ./src/game.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"GAMEMODE\": () => (/* binding */ GAMEMODE),\n/* harmony export */   \"game\": () => (/* binding */ game),\n/* harmony export */   \"timeNow\": () => (/* binding */ timeNow)\n/* harmony export */ });\n/* harmony import */ var _graphic_camera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./graphic/camera */ \"./src/graphic/camera.js\");\n/* harmony import */ var _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graphic/graphic */ \"./src/graphic/graphic.js\");\n/* harmony import */ var _dbg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./dbg */ \"./src/dbg.js\");\n/* harmony import */ var _entities_mobs_mobsManager__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./entities/mobs/mobsManager */ \"./src/entities/mobs/mobsManager.js\");\n/* harmony import */ var _input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./input */ \"./src/input.js\");\n/* harmony import */ var _entities_player__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./entities/player */ \"./src/entities/player.js\");\n/* harmony import */ var _terrain__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./terrain */ \"./src/terrain.js\");\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module './db/gameDB'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\n\n\n\n\n\n\n\nlet loop\nlet oldTime, dt\nvar timeNow = 0\nconst GAMEMODE = \"singleplayer\"\n\nconst game = {\n    config: {\n        fpsLimit: 60\n    },\n    start() {\n        // initialize components\n        _input__WEBPACK_IMPORTED_MODULE_4__.input.init();\n        _terrain__WEBPACK_IMPORTED_MODULE_6__.terrain.init()\n\n        _entities_player__WEBPACK_IMPORTED_MODULE_5__.player.init({x: 50, y: 30})\n\n        // camera needs player to be initiated\n        _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.init();\n        \n        // start timer\n        timeNow = oldTime = performance.now();\n        // initialize more components which needed timer\n        _dbg__WEBPACK_IMPORTED_MODULE_2__.debugInfo.init()\n        \n        // start loop\n        loop = setInterval(() => {\n            update()\n            draw()\n        }, 1000 / this.config.fpsLimit)\n\n        consoleLogSomethingAfterInit();\n    },\n    stop() {\n        clearInterval(loop)\n    }\n}\n\nfunction update() {\n    oldTime = timeNow\n    timeNow = performance.now();\n    dt = timeNow - oldTime;\n    \n    // entity update\n    _entities_player__WEBPACK_IMPORTED_MODULE_5__.player.updateActions(dt)\n    _entities_mobs_mobsManager__WEBPACK_IMPORTED_MODULE_3__.mobsManager.updateActions(dt)\n    _entities_player__WEBPACK_IMPORTED_MODULE_5__.player.updateMovement(dt)\n    _entities_mobs_mobsManager__WEBPACK_IMPORTED_MODULE_3__.mobsManager.updateMovement(dt)\n\n    // save changes to DB\n    //gameDB.update()\n\n\n    // graphic / performance info update\n    _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.update()\n    _dbg__WEBPACK_IMPORTED_MODULE_2__.debugInfo.update()\n}\n\nfunction draw() {\n    _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fillStyle = 'black'\n    _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fillRect(0, 0, _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.cnv.width, _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.cnv.height)\n    _terrain__WEBPACK_IMPORTED_MODULE_6__.terrain.draw()\n    _entities_mobs_mobsManager__WEBPACK_IMPORTED_MODULE_3__.mobsManager.draw()\n    _entities_player__WEBPACK_IMPORTED_MODULE_5__.player.draw()\n    drawCoords()\n    _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.draw()\n}\n\nfunction drawCoords() {\n    _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fillStyle = 'yellow'\n    _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.font = \"20px Arial\";\n    _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fillText(\"fps: \" + _dbg__WEBPACK_IMPORTED_MODULE_2__.debugInfo.fps.toFixed(2), 24, 30)\n    _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fillText(\"player x: \" + _entities_player__WEBPACK_IMPORTED_MODULE_5__.player.pos.x.toFixed(2) + \", y: \" + _entities_player__WEBPACK_IMPORTED_MODULE_5__.player.pos.y.toFixed(2), 24, 60)\n    _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fillText(\"cam x: \" + _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.pos.x.toFixed(2) + \", y: \" + _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.pos.y.toFixed(2), 24, 90)\n    _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fillText(\"that box x: \" + _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.boxOfStillness.pos.x.toFixed(2) + \", y: \" + _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.boxOfStillness.pos.y.toFixed(2), 24, 120)\n    _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.fillText(\"mouse x: \" + _input__WEBPACK_IMPORTED_MODULE_4__.input.mouse.pos.x.toFixed(2) + \", y: \" + _input__WEBPACK_IMPORTED_MODULE_4__.input.mouse.pos.y.toFixed(2), 24, 150)\n}\n\nfunction consoleLogSomethingAfterInit() {\n    console.log(\"Game initialized\")\n}\n\n//# sourceURL=webpack://app/./src/game.js?");

/***/ }),

/***/ "./src/graphic/camera.js":
/*!*******************************!*\
  !*** ./src/graphic/camera.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"cam\": () => (/* binding */ cam)\n/* harmony export */ });\n/* harmony import */ var _graphic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./graphic */ \"./src/graphic/graphic.js\");\n/* harmony import */ var _entities_player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../entities/player */ \"./src/entities/player.js\");\n\n\n\n// camera for keeping an eye on the player\nconst cam = {\n    config: {\n        meter2pixels: null\n    },\n    init() {\n        // hardcoded for 16/9 ratio\n        this.w = 16 // meters in game\n        this.h = 9\n        this.config.meter2pixels = _graphic__WEBPACK_IMPORTED_MODULE_0__.cnv.width / this.w\n        this.pos = {x: _entities_player__WEBPACK_IMPORTED_MODULE_1__.player.pos.x - this.w / 2, y: _entities_player__WEBPACK_IMPORTED_MODULE_1__.player.pos.y - this.h / 2}\n        // boxOfStillness is a collisionbox which triggers camera movement\n        this.boxOfStillness = {\n            pos: {x: this.pos.x + 4, y: this.pos.y + 2.5},\n            w: 8,\n            h: 4\n        }\n    },\n    update() {\n        // if player went outside boxOfStillness \n        // then calculate dx and dy\n        let dx = 0\n        let dy = 0\n        if (_entities_player__WEBPACK_IMPORTED_MODULE_1__.player.pos.x < this.boxOfStillness.pos.x)\n            dx = _entities_player__WEBPACK_IMPORTED_MODULE_1__.player.pos.x - this.boxOfStillness.pos.x\n        else if (_entities_player__WEBPACK_IMPORTED_MODULE_1__.player.pos.x > this.boxOfStillness.pos.x + this.boxOfStillness.w)\n            dx = _entities_player__WEBPACK_IMPORTED_MODULE_1__.player.pos.x - this.boxOfStillness.pos.x - this.boxOfStillness.w\n        if (_entities_player__WEBPACK_IMPORTED_MODULE_1__.player.pos.y < this.boxOfStillness.pos.y)\n            dy = _entities_player__WEBPACK_IMPORTED_MODULE_1__.player.pos.y - this.boxOfStillness.pos.y\n        else if (_entities_player__WEBPACK_IMPORTED_MODULE_1__.player.pos.y > this.boxOfStillness.pos.y + this.boxOfStillness.h)\n            dy = _entities_player__WEBPACK_IMPORTED_MODULE_1__.player.pos.y - this.boxOfStillness.pos.y - this.boxOfStillness.h\n        \n        // move the camera and boxOfStillness by calculated distance\n        this.pos.x += dx\n        this.pos.y += dy\n        this.boxOfStillness.pos.x += dx\n        this.boxOfStillness.pos.y += dy\n    },\n    draw() {\n        _graphic__WEBPACK_IMPORTED_MODULE_0__.ctx.strokeStyle = \"#aaaa00\"\n        let boxDrawPos = this.gamePos2ScreenPos(this.boxOfStillness.pos)\n        let boxWidth = this.boxOfStillness.w * this.config.meter2pixels\n        let boxHeight = this.boxOfStillness.h * this.config.meter2pixels\n        _graphic__WEBPACK_IMPORTED_MODULE_0__.ctx.lineWidth = 4;\n        _graphic__WEBPACK_IMPORTED_MODULE_0__.ctx.strokeRect(boxDrawPos.x, boxDrawPos.y, boxWidth, boxHeight);\n    },\n    screenPos2GamePos(pos) {\n        return {\n            x: (pos.x) / this.config.meter2pixels + cam.pos.x,\n            y: (pos.y) / this.config.meter2pixels + cam.pos.y\n        }\n    }, \n    gamePos2ScreenPos(pos) {\n        return {\n            x: (pos.x - cam.pos.x) * this.config.meter2pixels,\n            y: (pos.y - cam.pos.y) * this.config.meter2pixels\n        }\n    }\n}\n\n//# sourceURL=webpack://app/./src/graphic/camera.js?");

/***/ }),

/***/ "./src/graphic/graphic.js":
/*!********************************!*\
  !*** ./src/graphic/graphic.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"cnv\": () => (/* binding */ cnv),\n/* harmony export */   \"ctx\": () => (/* binding */ ctx),\n/* harmony export */   \"graphic\": () => (/* binding */ graphic)\n/* harmony export */ });\nconst cnv = document.getElementById(\"game-container\")\nconst ctx = cnv.getContext('2d')\n\nconst graphic = {\n    init() {\n        ctx.imageSmoothingEnabled = false;\n        cnv.width = 1024\n        cnv.height = 576\n        // center horisontally\n        cnv.style.display = 'block'\n        cnv.style.margin = 'auto'\n        \n        // center vertically\n        cnv.style.position = 'relative'\n        cnv.style.top = '50%'\n        cnv.style.transform = 'translateY(-50%)'\n\n        // save to variable\n        let cnvRect = cnv.getBoundingClientRect()\n        this.screen.x = cnvRect.x \n        this.screen.y = cnvRect.y\n        this.screen.w = cnvRect.width\n        this.screen.h = cnvRect.height\n\n        window.addEventListener('resize', function() {\n            let cnvRect = cnv.getBoundingClientRect()\n            graphic.screen.x = cnvRect.x \n            graphic.screen.y = cnvRect.y\n            graphic.screen.w = cnvRect.width\n            graphic.screen.h = cnvRect.height\n        });\n    },\n    screen: { }\n}\n\n//# sourceURL=webpack://app/./src/graphic/graphic.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"initializeGame\": () => (/* binding */ initializeGame)\n/* harmony export */ });\n/* harmony import */ var _graphic_graphic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./graphic/graphic */ \"./src/graphic/graphic.js\");\n/* harmony import */ var _game__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./game */ \"./src/game.js\");\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module './db/auth'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());\n\n\n\n\nlet startBtn = document.getElementById(\"start-btn\")\n\nstartBtn.onclick = function () {\n    initializeGame()\n}\n\nfunction initializeGame() {\n    // clear the start screen\n    let startScreen = document.getElementById(\"start-screen\")\n    startScreen.style.display = 'none'\n\n    // initialize canvas\n    _graphic_graphic__WEBPACK_IMPORTED_MODULE_0__.graphic.init()\n\n    // start the game\n    _game__WEBPACK_IMPORTED_MODULE_1__.game.start()\n}\n\nObject(function webpackMissingModule() { var e = new Error(\"Cannot find module './db/auth'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())()\n\n//# sourceURL=webpack://app/./src/index.js?");

/***/ }),

/***/ "./src/input.js":
/*!**********************!*\
  !*** ./src/input.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"input\": () => (/* binding */ input)\n/* harmony export */ });\n/* harmony import */ var _graphic_graphic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./graphic/graphic */ \"./src/graphic/graphic.js\");\n/* harmony import */ var _entities_mobs_mobsManager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./entities/mobs/mobsManager */ \"./src/entities/mobs/mobsManager.js\");\n/* harmony import */ var _entities_player__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./entities/player */ \"./src/entities/player.js\");\n\n\n\n\nvar input = {\n    currentMode: \"player_control\",\n    mouse: {\n        pos: {x: -1, y: -1},\n        pressingLeft: false,\n        pressingRight: false\n    },\n    keyboard: {\n        pressingLeft: false,\n        pressingRight: false,\n        pressingUp: false,\n        pressingDown: false\n    },\n    init() {\n        // keyboard \n        initKeyBinds()\n        addEventListener(\"keydown\", function(e) {\n            // if pressed keycode is in hashmap then run method\n            const actionKey = mode[input.currentMode].keyBinds[e.code];\n            const handleInput = mode[input.currentMode].keyDown[actionKey];\n            if(handleInput) handleInput();\n        })\n        addEventListener(\"keyup\", function(e) {\n            const actionKey = mode[input.currentMode].keyBinds[e.code];\n            const handleInput = mode[input.currentMode].keyUp[actionKey];\n            if(handleInput) handleInput();\n        })\n\n        // mouse\n        addEventListener(\"mousemove\", function(e) {\n           input.mouse.pos.x = e.x - _graphic_graphic__WEBPACK_IMPORTED_MODULE_0__.graphic.screen.x\n           input.mouse.pos.y = e.y - _graphic_graphic__WEBPACK_IMPORTED_MODULE_0__.graphic.screen.y\n        }, { passive: false })\n        addEventListener(\"mousedown\", function(e) {\n            if (e.button == 0) {\n                input.mouse.pressingLeft = true;\n                _entities_player__WEBPACK_IMPORTED_MODULE_2__.player.attackTriggered = true;\n            }\n            else if (e.button == 1)\n                input.mouse.pressingRight = true;\n        }, { passive: false })\n        addEventListener(\"mouseup\", function(e) {\n            if (e.button == 0)\n                input.mouse.pressingLeft = false;\n            else if (e.button == 1)\n                input.mouse.pressingRight = false;\n        }, { passive: false })\n        addEventListener(\"wheel\", function(e) {\n            // let d = e.deltaY / Math.abs(e.deltaY);\n            // eq.selectedSlot = (eq.size + eq.selectedSlot + d) % eq.size;\n        })\n    }\n}\n\n\n\n// key value hashmap for methods associated with keybinds\nconst mode = {\n    player_control: {\n        keyBinds: {}, // to initialize\n        keyDown: {\n            left: function() { input.keyboard.pressingLeft = true },\n            right: function () { input.keyboard.pressingRight = true },\n            down: function () { input.keyboard.pressingDown = true },\n            up: function () { input.keyboard.pressingUp = true },\n            spawnMob: function () { \n                _entities_mobs_mobsManager__WEBPACK_IMPORTED_MODULE_1__.mobsManager.createMob({\n                    x: _entities_player__WEBPACK_IMPORTED_MODULE_2__.player.pos.x + Math.random() * 10 - 5,\n                    y: _entities_player__WEBPACK_IMPORTED_MODULE_2__.player.pos.y + Math.random() * 10 - 5 \n                });\n            }\n        },\n        keyUp: {\n            left: function() { input.keyboard.pressingLeft = false },\n            right: function () { input.keyboard.pressingRight = false },\n            down: function () { input.keyboard.pressingDown = false },\n            up: function () { input.keyboard.pressingUp = false }\n        }\n    }\n}\n\nfunction initKeyBinds() {\n    mode.player_control.keyBinds[\"KeyA\"] = \"left\";\n    mode.player_control.keyBinds[\"KeyD\"] = \"right\";\n    mode.player_control.keyBinds[\"KeyW\"] = \"up\";\n    mode.player_control.keyBinds[\"KeyS\"] = \"down\";\n    mode.player_control.keyBinds[\"Space\"] = \"spawnMob\";\n}\n\n//# sourceURL=webpack://app/./src/input.js?");

/***/ }),

/***/ "./src/physics/collision.js":
/*!**********************************!*\
  !*** ./src/physics/collision.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"collision\": () => (/* binding */ collision)\n/* harmony export */ });\nconst collision = {\n    init() { },\n    bounceOffCbox(cBoxDynamic, cBoxStatic) {\n        let executeTheBounce = bounceFoos[cBoxDynamic.type + \"_\" + cBoxStatic.type]\n        executeTheBounce(cBoxDynamic, cBoxStatic)\n    },\n    detect(hitbox1, hitbox2) {\n        let checkDetection = collisionDetectionFoos[hitbox1.type + \"_\" + hitbox2.type]\n        if (checkDetection)\n            return checkDetection(hitbox1, hitbox2)\n        else return false\n    }\n}\nconst bounceFoos = {\n    circle_circle: function (cBoxDynamic, cBoxStatic) {\n        let radii = cBoxDynamic.r + cBoxStatic.r\n        let dx = cBoxStatic.pos.x - cBoxDynamic.pos.x\n        let dy = cBoxStatic.pos.y - cBoxDynamic.pos.y\n        let dist = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n        if(dist < radii) {\n            cBoxDynamic.pos.x -=  (dx * radii / dist) - dx;\n            cBoxDynamic.pos.y -= (dy * radii / dist) - dy;\n        }\n    }\n}\n\n// key = 2 hitbox type strings separated by _,\n// value = function detecting collision between those 2 hitboxes\nconst collisionDetectionFoos = {\n    line_circle: collisionLineCircle,\n    circle_line: collisionCircleLine,\n    circle_circle: function (circle1, circle2) {\n        let radii = circle1.r + circle2.r\n        let dx = circle1.pos.x - circle2.pos.x\n        let dy = circle1.pos.y - circle2.pos.y\n        let dist = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\n        return (dist < radii)\n    }\n}\n\n// thanks stack overflow\nfunction collisionLineCircle(line, circle){\n    let lineCircleDistance = distanceSegmentToPoint(\n        line.p1, line.p2, circle.pos);\n    return (lineCircleDistance < circle.r);\n}\nfunction collisionCircleLine(circle, line) {\n    return collisionLineCircle(line, circle)\n}\n/**\n * Returns the distance from line segment AB to point C\n */\nfunction distanceSegmentToPoint(A, B, C) {\n    // Compute vectors AC and AB\n    const AC = sub(C, A);\n    const AB = sub(B, A);\n\n    // Get point D by taking the projection of AC onto AB then adding the offset of A\n    const D = add(proj(AC, AB), A);\n\n    const AD = sub(D, A);\n    // D might not be on AB so calculate k of D down AB (aka solve AD = k * AB)\n    // We can use either component, but choose larger value to reduce the chance of dividing by zero\n    const k = Math.abs(AB.x) > Math.abs(AB.y) ? AD.x / AB.x : AD.y / AB.y;\n\n    // Check if D is off either end of the line segment\n    if (k <= 0.0) {\n        return Math.sqrt(hypot2(C, A));\n    } else if (k >= 1.0) {\n        return Math.sqrt(hypot2(C, B));\n    }\n\n    return Math.sqrt(hypot2(C, D));\n}\nconst add = (a, b) => ({x: a.x + b.x, y: a.y + b.y});\nconst sub = (a, b) => ({x: a.x - b.x, y: a.y - b.y});\nconst dot = (a, b) => a.x * b.x + a.y * b.y;\nconst hypot2 = (a, b) => dot(sub(a, b), sub(a, b));\n\n// Function for projecting some vector a onto b\nfunction proj(a, b) {\n    const k = dot(a, b) / dot(b, b);\n    return {x: k * b.x, y: k * b.y};\n}\n\n//# sourceURL=webpack://app/./src/physics/collision.js?");

/***/ }),

/***/ "./src/terrain.js":
/*!************************!*\
  !*** ./src/terrain.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"terrain\": () => (/* binding */ terrain)\n/* harmony export */ });\n/* harmony import */ var _graphic_camera__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./graphic/camera */ \"./src/graphic/camera.js\");\n/* harmony import */ var _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./graphic/graphic */ \"./src/graphic/graphic.js\");\n\n\n\nconst terrain = {\n    init() {\n        \n    },\n    draw() {\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.strokeStyle = \"#0090ff\"\n        _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.lineWidth = 2\n        let drawTopLeft = _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.gamePos2ScreenPos({\n            x: Math.floor(_graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.pos.x),\n            y: Math.floor(_graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.pos.y)})\n        for (let ix = 1; ix < _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.w; ix++) {\n            for (let iy = 1; iy < _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.h; iy++) {\n                let drawX = drawTopLeft.x + ix * _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.config.meter2pixels\n                let drawY = drawTopLeft.y + iy * _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.config.meter2pixels\n                _graphic_graphic__WEBPACK_IMPORTED_MODULE_1__.ctx.strokeRect(drawX, drawY, _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.config.meter2pixels, _graphic_camera__WEBPACK_IMPORTED_MODULE_0__.cam.config.meter2pixels)\n            }\n        }\n    }\n}\n\n//# sourceURL=webpack://app/./src/terrain.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;